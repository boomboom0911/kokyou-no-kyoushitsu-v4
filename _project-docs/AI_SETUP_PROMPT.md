# 公共の教室 v4 - AI導入サポート用プロンプト

**このプロンプトをChatGPT/Claude等にコピー＆ペーストして、導入サポートを受けてください。**

---

## 📌 依頼内容

私は「公共の教室 v4」という教育用Webアプリを自分の学校に導入したいと考えています。
Supabase、Vercel、GitHubを使ったことがないため、ステップバイステップでサポートしてください。

## 📚 システム概要

**公共の教室 v4** は以下の機能を持つ学習プラットフォームです:

### 主要機能
1. **授業セッション**
   - 教員が4桁コードで授業を作成
   - 生徒がコード入力で参加
   - リアルタイムでトピック投稿・議論

2. **掲示板（課題提出・ピアレビュー）**
   - 教員が課題を作成
   - 生徒が作品提出
   - 匿名（動物アイコン）でピアレビュー
   - 4軸評価: 良い点・改善点・質問・総合コメント
   - 投稿者がレビューに返信可能

3. **統合通知システム**
   - レビュー受信・返信・トピックコメントを通知
   - 生徒メニューに未読バッジ表示

4. **ポートフォリオ**
   - 学習履歴をJSON/CSVでエクスポート

### 技術スタック
- Next.js 15 (App Router) + TypeScript
- Supabase (PostgreSQL)
- Vercel (ホスティング)
- Google OAuth（推奨）

## 🎯 導入の目的

- [ ] デモ版を試してみたい（まずはこれ）
- [ ] 自分の学校用にカスタマイズして導入したい
- [ ] Google OAuth（学校アカウント）との連携も設定したい

**現在の進捗:** （どこまで完了したか教えてください）

---

## 📋 導入手順（AIがサポートします）

以下の手順を1つずつ進めます。わからないことがあればいつでも質問してください。

### ステップ1: GitHubリポジトリのフォーク

**目的:** ソースコードを自分のアカウントにコピー

1. https://github.com/boomboom0911/kokyou-no-kyoushitsu-v4 にアクセス
2. 右上の「Fork」ボタンをクリック
3. 自分のGitHubアカウントを選択

**確認:** フォークしたリポジトリのURL（`https://github.com/あなたのユーザー名/kokyou-no-kyoushitsu-v4`）

---

### ステップ2: Supabaseプロジェクトの作成

**目的:** データベースを用意

1. https://supabase.com/ にアクセス
2. GitHubアカウントでサインアップ/ログイン
3. 「New Project」をクリック
4. 設定:
   - **Name:** `kokyou-classroom`（任意）
   - **Database Password:** 強力なパスワードを生成（**必ずメモ！**）
   - **Region:** `Northeast Asia (Tokyo)`
   - **Plan:** Free
5. 「Create new project」をクリック（数分待つ）

**確認:** プロジェクトが作成され、ダッシュボードが表示される

---

### ステップ3: データベーススキーマのセットアップ

**目的:** テーブルを作成

**重要:** 以下のSQLを**順番通りに**実行してください。

#### 実行方法:
1. Supabaseダッシュボード → 左メニュー「SQL Editor」
2. 「New query」をクリック
3. SQLをコピー＆ペースト
4. 「Run」をクリック
5. 成功メッセージを確認

#### 実行順序:

**1️⃣ 基本スキーマ** (`supabase-schema.sql`)
```sql
-- このファイルの内容を実行
-- GitHub: https://github.com/boomboom0911/kokyou-no-kyoushitsu-v4/blob/main/supabase-schema.sql
```

**2️⃣ 掲示板スキーマ** (`supabase-board-schema.sql`)
```sql
-- このファイルの内容を実行
```

**3️⃣ 返信機能** (`supabase-board-add-reply.sql`)
```sql
-- このファイルの内容を実行
```

**4️⃣ 通知システム** (`supabase-notifications.sql`)
```sql
-- このファイルの内容を実行
```

**AIへの質問例:**
- 「SQLファイルの内容をどこで見られますか？」
- 「実行時にエラーが出ました: [エラーメッセージ]」

---

### ステップ4: Supabase接続情報の取得

**目的:** VercelからSupabaseに接続するための情報を取得

1. Supabaseダッシュボード → 「Settings」→「API」
2. 以下をコピー:
   - **Project URL:** `https://xxxxx.supabase.co`
   - **anon public key:** `eyJhbGci...`（長い文字列）

**確認:** 2つの値をメモ帳に保存

---

### ステップ5: Vercelでデプロイ

**目的:** アプリを公開

1. https://vercel.com/ にアクセス
2. GitHubアカウントでログイン
3. 「Add New...」→「Project」
4. フォークした `kokyou-no-kyoushitsu-v4` を選択
5. 「Import」をクリック
6. **環境変数を設定:**
   - `NEXT_PUBLIC_SUPABASE_URL` = （ステップ4のProject URL）
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY` = （ステップ4のanon key）
7. 「Deploy」をクリック
8. 数分待つ → デプロイ完了！

**確認:** デプロイされたURL（`https://あなたのプロジェクト.vercel.app`）にアクセスできる

---

### ステップ6: デモデータの投入（オプション）

**目的:** テスト用のアカウントを作成

Supabase SQL Editorで実行:

```sql
-- 教員アカウント
INSERT INTO teachers (email, hashed_password, name)
VALUES ('teacher@yourschool.ed.jp', crypt('demo1234', gen_salt('bf')), '先生');

-- 生徒アカウント
INSERT INTO students (google_email, display_name, student_number, class_id)
VALUES
  ('student1@yourschool.ed.jp', '生徒1', 1, '1年A組'),
  ('student2@yourschool.ed.jp', '生徒2', 2, '1年A組');
```

**確認:**
- 教員ページ: `https://あなたのURL/teacher` → `teacher@yourschool.ed.jp` / `demo1234`
- 生徒ページ: `https://あなたのURL/student` → `student1@yourschool.ed.jp`

---

### ステップ7: Google OAuth設定（推奨・本番用）

**目的:** 学校のGoogleアカウントでログイン

**このステップは高度です。AIに詳しくサポートしてもらいましょう。**

#### 概要:
1. Google Cloud Consoleでプロジェクト作成
2. OAuth同意画面の設定（内部ユーザー限定）
3. OAuth 2.0 クライアントID作成
4. Vercelに環境変数追加
5. NextAuth.js設定ファイル作成（コード修正が必要）

**AIへの依頼:**
```
Google OAuth設定を詳しく教えてください。
学校ドメイン: @yourschool.ed.jp
現在の認証: localStorage（デモ版）
目標: 学校のGoogleアカウントのみでログイン可能にする
```

---

## 🆘 トラブルシューティング

### よくある問題

#### ❌ デプロイ後に画面が真っ白
**原因:** 環境変数の設定ミス
**解決:** Vercel → Settings → Environment Variables を確認 → Redeploy

#### ❌ ログインできない
**原因:** データベースにユーザーが存在しない
**解決:** ステップ6のデモデータ投入を実行

#### ❌ セッションに参加できない
**原因:** セッションコードが存在しない
**解決:** 教員画面で新しいセッションを作成

#### ❌ 通知が表示されない
**原因:** notificationsテーブルが未作成
**解決:** `supabase-notifications.sql` を再実行

---

## 💬 AIアシスタントへの質問例

**導入中:**
- 「ステップ3でエラーが出ました: [エラー内容]」
- 「Supabaseのどこで○○を設定しますか？」
- 「Vercelの環境変数の設定画面が見つかりません」

**カスタマイズ:**
- 「ログイン画面のデザインを変更したい」
- 「クラス名を『1年A組』から『高1-1』に変更したい」
- 「掲示板のレビュー項目を3つに減らしたい」

**Google OAuth:**
- 「Google Cloud Consoleの『OAuth同意画面』の設定手順を画像付きで教えて」
- 「NextAuth.jsの設定ファイルはどこに作りますか？」
- 「学校ドメインのみ許可するコードを書いてください」

**エラー解決:**
- 「ブラウザのコンソールに『[エラーメッセージ]』と表示されます」
- 「生徒がセッションに参加しようとすると『認証エラー』が出ます」

---

## 📊 進捗チェックリスト

導入状況を確認しましょう:

- [ ] GitHubアカウント作成
- [ ] リポジトリをフォーク
- [ ] Supabaseアカウント作成
- [ ] Supabaseプロジェクト作成
- [ ] SQL 1/4: 基本スキーマ実行
- [ ] SQL 2/4: 掲示板スキーマ実行
- [ ] SQL 3/4: 返信機能実行
- [ ] SQL 4/4: 通知システム実行
- [ ] Supabase接続情報取得
- [ ] Vercelアカウント作成
- [ ] Vercelにプロジェクトインポート
- [ ] 環境変数設定
- [ ] デプロイ成功
- [ ] デモデータ投入
- [ ] 教員ログインテスト
- [ ] 生徒ログインテスト
- [ ] セッション作成・参加テスト
- [ ] 掲示板作成・提出テスト
- [ ] ピアレビューテスト
- [ ] 通知機能テスト
- [ ] Google OAuth設定（オプション）

---

## 🎓 導入完了後のNext Steps

導入が完了したら:

1. **教員向けマニュアル作成**
   - セッション作成方法
   - 掲示板作成方法
   - 統計の見方

2. **生徒向けマニュアル作成**
   - ログイン方法
   - トピック投稿方法
   - レビューの書き方

3. **試験運用**
   - 1クラスで小規模テスト
   - フィードバック収集
   - 必要に応じてカスタマイズ

4. **本格運用**
   - 全学年に展開
   - 定期的なバックアップ
   - Supabaseの使用量モニタリング

---

## 🤖 このプロンプトの使い方

**AIアシスタント（ChatGPT/Claude等）へ:**

ユーザーは「公共の教室 v4」を自分の学校に導入しようとしています。
技術初心者の可能性が高いため、以下のようにサポートしてください:

1. **現在地を確認:** 「どのステップまで完了しましたか？」
2. **1ステップずつ:** 一度に複数ステップを進めない
3. **スクリーンショット推奨:** 「○○ボタンをクリック」だけでなく、場所を具体的に説明
4. **エラー時:** エラーメッセージ全文の共有を依頼
5. **コード提示:** 必ずコードブロックで、ファイル名も明記
6. **確認:** 各ステップ後に「成功しましたか？」と確認

**サポート優先度:**
- 🔴 エラー解決 > 🟡 次のステップ進行 > 🟢 カスタマイズ相談

ユーザーの質問や状況を聞き、適切なサポートを提供してください。

---

**準備完了！AIに質問を始めましょう 🚀**

「こんにちは！公共の教室v4を導入したいです。現在、[あなたの状況]です。何から始めればよいですか？」
