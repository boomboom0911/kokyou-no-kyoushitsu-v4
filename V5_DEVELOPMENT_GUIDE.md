# ğŸš€ ã‚³ã‚¦ã‚­ãƒ§ã‚¦ã®ã‚­ãƒ§ã‚¦ã‚·ãƒ„ v5 é–‹ç™ºã‚¬ã‚¤ãƒ‰

**å¯¾è±¡**: Claude Code / AIé–‹ç™ºã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
**ç›®çš„**: v4ã®æ§‹é€ ã‚’åŠ¹ç‡çš„ã«ç†è§£ã—ã€v5ã®æ–°æ©Ÿèƒ½ã‚’æ¤œè¨ãƒ»å®Ÿè£…ã™ã‚‹

---

## ğŸ“‹ ç›®æ¬¡

1. [v4ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#v4ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [åŠ¹ç‡çš„ãªèª­ã¿è¾¼ã¿é †åº](#åŠ¹ç‡çš„ãªèª­ã¿è¾¼ã¿é †åº)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ )
5. [APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³](#apiè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³)
6. [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ](#ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ)
7. [v5ã§æ¤œè¨ã™ã¹ãæ”¹å–„ç‚¹](#v5ã§æ¤œè¨ã™ã¹ãæ”¹å–„ç‚¹)
8. [v5æ–°æ©Ÿèƒ½ã®è¦ä»¶](#v5æ–°æ©Ÿèƒ½ã®è¦ä»¶)

---

## v4ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ€§æ ¼
ã€Œã‚³ã‚¦ã‚­ãƒ§ã‚¦ã®ã‚­ãƒ§ã‚¦ã‚·ãƒ„ v4ã€ã¯ã€æ•™å®¤ã§ã®è­°è«–ã‚’å¯è¦–åŒ–ãƒ»æ´»æ€§åŒ–ã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

**ä¸»è¦æ©Ÿèƒ½**:
1. **æˆæ¥­ã‚»ãƒƒã‚·ãƒ§ãƒ³** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åº§å¸­é¸æŠãƒ»ãƒˆãƒ”ãƒƒã‚¯æŠ•ç¨¿ãƒ»è­°è«–
2. **æ²ç¤ºæ¿ã‚·ã‚¹ãƒ†ãƒ ** - èª²é¡Œæå‡ºãƒ»åŒ¿åãƒ”ã‚¢ãƒ¬ãƒ“ãƒ¥ãƒ¼
3. **é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ãƒ»æœªèª­ç®¡ç†
4. **ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª** - å­¦ç¿’è¨˜éŒ²ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:
- Next.js 15 (App Router) + TypeScript
- Supabase (PostgreSQL + Realtime)
- TailwindCSS
- Vercel ãƒ‡ãƒ—ãƒ­ã‚¤

---

## åŠ¹ç‡çš„ãªèª­ã¿è¾¼ã¿é †åº

### ğŸ“– Phase 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“åƒã®æŠŠæ¡ï¼ˆ5åˆ†ï¼‰

ä»¥ä¸‹ã‚’é †ç•ªã«èª­ã‚€ï¼š

1. **`README.md`** - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ãƒ»ä¸»è¦æ©Ÿèƒ½
2. **`V4_COMPLETION_SUMMARY.md`** - v4ã§å®Ÿè£…ã•ã‚ŒãŸå…¨æ©Ÿèƒ½ã®è©³ç´°
3. **`DEMO_AND_SETUP_GUIDE.md`** - ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œãƒ»ä½¿ã„æ–¹

### ğŸ—ï¸ Phase 2: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£ï¼ˆ10åˆ†ï¼‰

ä»¥ä¸‹ã‚’é †ç•ªã«èª­ã‚€ï¼š

1. **å‹å®šç¾©ã®ç†è§£**:
   ```
   src/types/index.ts        # å…¨ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®å‹å®šç¾©ï¼ˆæœ€é‡è¦ï¼‰
   src/types/board.ts        # æ²ç¤ºæ¿å°‚ç”¨ã®å‹å®šç¾©
   ```

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ**:
   ```
   scripts/database/schema/supabase-schema.sql          # åŸºæœ¬ã‚¹ã‚­ãƒ¼ãƒ
   scripts/database/schema/supabase-board-schema.sql    # æ²ç¤ºæ¿ã‚¹ã‚­ãƒ¼ãƒ
   scripts/database/schema/supabase-notifications.sql   # é€šçŸ¥ã‚¹ã‚­ãƒ¼ãƒ
   ```

3. **å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
   ```
   src/lib/supabase.ts       # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š
   src/lib/storage.ts        # localStorageèªè¨¼ç®¡ç†
   src/lib/notifications.ts  # é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
   ```

### ğŸ”Œ Phase 3: APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®æŠŠæ¡ï¼ˆ15åˆ†ï¼‰

APIã¯æ©Ÿèƒ½åˆ¥ã«15ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†é¡ï¼š

```
src/app/api/
â”œâ”€â”€ auth/              èªè¨¼ï¼ˆç”Ÿå¾’ãƒ»æ•™å“¡ï¼‰
â”œâ”€â”€ sessions/          æˆæ¥­ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”œâ”€â”€ seats/             åº§å¸­å‰²ã‚Šå½“ã¦
â”œâ”€â”€ topics/            ãƒˆãƒ”ãƒƒã‚¯æŠ•ç¨¿
â”œâ”€â”€ reactions/         ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
â”œâ”€â”€ interactions/      ã‚³ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ chat/              åŒ¿åãƒãƒ£ãƒƒãƒˆ
â”œâ”€â”€ learning-memos/    å­¦ç¿’ãƒ¡ãƒ¢
â”œâ”€â”€ board/             æ²ç¤ºæ¿ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼
â”œâ”€â”€ notifications/     é€šçŸ¥
â”œâ”€â”€ students/          ç”Ÿå¾’ç®¡ç†
â”œâ”€â”€ classes/           ã‚¯ãƒ©ã‚¹ç®¡ç†
â”œâ”€â”€ export/            ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”œâ”€â”€ admin/             ç®¡ç†æ©Ÿèƒ½
â””â”€â”€ debug/             ãƒ‡ãƒãƒƒã‚°ç”¨
```

**é‡è¦ãªAPIä¾‹**:
- `src/app/api/sessions/route.ts` - ã‚»ãƒƒã‚·ãƒ§ãƒ³CRUD
- `src/app/api/board/route.ts` - æ²ç¤ºæ¿CRUD
- `src/app/api/interactions/route.ts` - ã‚³ãƒ¡ãƒ³ãƒˆãƒ»é€šçŸ¥é€£æº
- `src/app/api/notifications/route.ts` - é€šçŸ¥ç®¡ç†

### ğŸ§© Phase 4: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ ã®ç†è§£ï¼ˆ10åˆ†ï¼‰

```
src/components/
â”œâ”€â”€ SeatMap.tsx                   # åº§å¸­ãƒãƒƒãƒ—ï¼ˆæ•™å®¤ã®æ ¸å¿ƒï¼‰
â”œâ”€â”€ TopicCard.tsx                 # ãƒˆãƒ”ãƒƒã‚¯è¡¨ç¤ºãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ ChatPanel.tsx                 # ãƒãƒ£ãƒƒãƒˆãƒ‘ãƒãƒ«
â”œâ”€â”€ ReactionBar.tsx               # ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ¼
â”œâ”€â”€ QuickMemo.tsx                 # å­¦ç¿’ãƒ¡ãƒ¢
â”œâ”€â”€ NotificationDropdown.tsx      # é€šçŸ¥ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³
â”œâ”€â”€ board/
â”‚   â”œâ”€â”€ SubmissionCard.tsx       # ä½œå“æå‡ºã‚«ãƒ¼ãƒ‰
â”‚   â””â”€â”€ ReviewCard.tsx           # ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚«ãƒ¼ãƒ‰
â””â”€â”€ portfolio/
    â”œâ”€â”€ MyTopicCardComponent.tsx        # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªè¡¨ç¤º
    â”œâ”€â”€ ReactedTopicCardComponent.tsx
    â””â”€â”€ CommentedTopicCardComponent.tsx
```

### ğŸ“„ Phase 5: ä¸»è¦ãƒšãƒ¼ã‚¸ã®ç†è§£ï¼ˆ15åˆ†ï¼‰

```
src/app/
â”œâ”€â”€ page.tsx                          # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆç”Ÿå¾’/æ•™å“¡é¸æŠï¼‰
â”œâ”€â”€ student/
â”‚   â”œâ”€â”€ page.tsx                     # ç”Ÿå¾’ãƒ­ã‚°ã‚¤ãƒ³
â”‚   â”œâ”€â”€ menu/page.tsx                # ç”Ÿå¾’ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â””â”€â”€ portfolio/page.tsx           # ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª
â”œâ”€â”€ teacher/
â”‚   â”œâ”€â”€ menu/page.tsx                # æ•™å“¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”œâ”€â”€ create-session/page.tsx      # ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
â”‚   â”œâ”€â”€ register-students/page.tsx   # ç”Ÿå¾’ç™»éŒ²
â”‚   â””â”€â”€ boards/
â”‚       â”œâ”€â”€ create/page.tsx          # æ²ç¤ºæ¿ä½œæˆ
â”‚       â””â”€â”€ [id]/page.tsx            # æ²ç¤ºæ¿ç®¡ç†
â”œâ”€â”€ classroom/[sessionCode]/page.tsx  # æ•™å®¤ï¼ˆç”Ÿå¾’ãƒ»æ•™å“¡å…±é€šï¼‰
â”œâ”€â”€ all-classes/page.tsx             # å…¨æˆæ¥­ä¸€è¦§
â””â”€â”€ board/[code]/page.tsx            # æ²ç¤ºæ¿å‚åŠ 
```

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£

### ğŸ›ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Next.js 15 App Router               â”‚
â”‚  (Server Components + Client Components)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           API Routes (39 endpoints)         â”‚
â”‚    /api/sessions, /api/board, etc.          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Supabase PostgreSQL Database         â”‚
â”‚     + Realtime Subscriptions (WebSocket)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”‘ èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 

**ç¾åœ¨ã®å®Ÿè£…** (v4):
- **localStorage ãƒ™ãƒ¼ã‚¹** - `src/lib/storage.ts`
- **å›ºå®šIDæ–¹å¼**:
  - æ•™å“¡: `student_id = -999`
  - ã‚²ã‚¹ãƒˆ: `student_id = -1`
  - ç”Ÿå¾’: `student_id > 0`

**v5ã¸ã®æ”¹å–„ææ¡ˆ**:
- Google OAuth 2.0 å®Ÿè£…
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†
- RLS (Row Level Security) ã®æ´»ç”¨

### ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### 1. æˆæ¥­ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒ•ãƒ­ãƒ¼

```
æ•™å“¡: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
  â†“
4æ¡ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ (lesson_sessions)
  â†“
ç”Ÿå¾’: ã‚³ãƒ¼ãƒ‰å…¥åŠ› â†’ åº§å¸­é¸æŠ
  â†“
seat_assignments ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¨˜éŒ²
  â†“
ãƒˆãƒ”ãƒƒã‚¯æŠ•ç¨¿ (topic_posts)
  â†“
ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ (reactions, interactions)
  â†“
ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–° (Supabase Realtime)
```

#### 2. æ²ç¤ºæ¿ã®ãƒ•ãƒ­ãƒ¼

```
æ•™å“¡: æ²ç¤ºæ¿ä½œæˆ (boards)
  â†“
ç”Ÿå¾’: ä½œå“æå‡º (board_submissions)
  â†“
ä»–ã®ç”Ÿå¾’: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿ (board_reviews)
  â†“
æŠ•ç¨¿è€…: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«è¿”ä¿¡ (board_review_replies)
  â†“
é€šçŸ¥ç”Ÿæˆ (notifications)
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

### ğŸ“‹ ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

#### åŸºæœ¬ãƒã‚¹ã‚¿
```sql
classes              -- ã‚¯ãƒ©ã‚¹ãƒã‚¹ã‚¿ (2-1, 2-2ãªã©)
students             -- ç”Ÿå¾’ãƒã‚¹ã‚¿ (id, email, class_id)
```

#### æˆæ¥­ã‚»ãƒƒã‚·ãƒ§ãƒ³é–¢é€£
```sql
lesson_sessions      -- æˆæ¥­ã‚»ãƒƒã‚·ãƒ§ãƒ³ (code, topic_title, ended_at)
seat_assignments     -- åº§å¸­å‰²ã‚Šå½“ã¦ (session_id, student_id, seat_number)
topic_posts          -- ãƒˆãƒ”ãƒƒã‚¯æŠ•ç¨¿ (content, session_id, student_id)
reactions            -- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ (target_type, target_id, reaction_type)
interactions         -- ã‚³ãƒ¡ãƒ³ãƒˆ (target_type, target_id, comment_text)
chat_messages        -- åŒ¿åãƒãƒ£ãƒƒãƒˆ (session_id, student_id, message)
learning_memos       -- å­¦ç¿’ãƒ¡ãƒ¢ (student_id, session_id, content)
absences             -- æ¬ å¸­è¨˜éŒ² (session_id, student_id)
```

#### æ²ç¤ºæ¿é–¢é€£
```sql
boards               -- æ²ç¤ºæ¿ (code, title, review_required_count)
board_submissions    -- ä½œå“æå‡º (board_id, student_id, content)
board_reviews        -- ãƒ¬ãƒ“ãƒ¥ãƒ¼ (submission_id, reviewer_id, rating)
board_review_replies -- ãƒ¬ãƒ“ãƒ¥ãƒ¼è¿”ä¿¡ (review_id, reply_text)
```

#### é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
```sql
notifications        -- é€šçŸ¥ (student_id, type, message, is_read)
```

### ğŸ”— é‡è¦ãªå¤–éƒ¨ã‚­ãƒ¼é–¢ä¿‚

```
lesson_sessions
  â†“
seat_assignments â†’ students
  â†“
topic_posts
  â†“
reactions, interactions (target_type: 'topic' | 'comment')

boards
  â†“
board_submissions â†’ students
  â†“
board_reviews â†’ students (reviewer)
  â†“
board_review_replies
  â†“
notifications
```

### ğŸ“Œ å›ºå®šIDã®è¨­è¨ˆ

```typescript
// src/types/index.ts ã§å®šç¾©
// ç‰¹æ®Šãª student_id:
-999: æ•™å“¡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (æ•™ç§‘æ‹…å½“è€…)
  -1: ã‚²ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆ (æœªç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼)
 1~N: ç™»éŒ²æ¸ˆã¿ç”Ÿå¾’
```

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€ç”Ÿå¾’ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç‰¹æ®Šãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã™ã‚‹ã“ã¨ã§ã€æ•™å“¡ãƒ»ã‚²ã‚¹ãƒˆã‚‚çµ±ä¸€çš„ã«æ‰±ãˆã‚‹ã€‚

---

## APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### ğŸ¨ çµ±ä¸€ã•ã‚ŒãŸAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

å…¨APIã¯ä»¥ä¸‹ã®å‹ã‚’è¿”ã™ï¼š

```typescript
// src/types/index.ts
export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
}
```

**æˆåŠŸä¾‹**:
```json
{
  "success": true,
  "data": { "session": {...} },
  "message": "ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã—ãŸ"
}
```

**ã‚¨ãƒ©ãƒ¼ä¾‹**:
```json
{
  "success": false,
  "error": "ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
}
```

### ğŸ”§ APIã®å‘½åè¦å‰‡

```
GET    /api/resource          # ä¸€è¦§å–å¾—
POST   /api/resource          # æ–°è¦ä½œæˆ
GET    /api/resource/[id]     # è©³ç´°å–å¾—
PUT    /api/resource/[id]     # æ›´æ–°
DELETE /api/resource/[id]     # å‰Šé™¤

# ç‰¹æ®Šãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
POST   /api/sessions/[id]/end      # ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†
GET    /api/board/[id]/stats       # çµ±è¨ˆå–å¾—
POST   /api/board/review           # ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿
```

### ğŸ“¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã®å®Ÿè£…

Supabase Realtime ã‚’ä½¿ç”¨ï¼š

```typescript
// åº§å¸­å¤‰æ›´ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ä¾‹
const channel = supabase
  .channel('seat-changes')
  .on(
    'postgres_changes',
    {
      event: '*',
      schema: 'public',
      table: 'seat_assignments',
      filter: `session_id=eq.${sessionId}`
    },
    (payload) => {
      console.log('Seat changed:', payload);
      fetchSeats(); // å†å–å¾—
    }
  )
  .subscribe();
```

**ç›£è¦–å¯¾è±¡**:
- `seat_assignments` - åº§å¸­å¤‰æ›´
- `topic_posts` - ãƒˆãƒ”ãƒƒã‚¯æŠ•ç¨¿
- `chat_messages` - ãƒãƒ£ãƒƒãƒˆ
- `notifications` - é€šçŸ¥

---

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### ğŸ§© ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è²¬å‹™

#### 1. SeatMap.tsx - åº§å¸­ãƒãƒƒãƒ—
**è²¬å‹™**:
- 7è¡Œ6åˆ—ï¼ˆ42å¸­ï¼‰ã®åº§å¸­é…ç½®ã‚’è¡¨ç¤º
- åº§å¸­ã®çŠ¶æ…‹ç®¡ç†ï¼ˆç©ºå¸­ãƒ»ç€å¸­ãƒ»æŠ•ç¨¿æ¸ˆã¿ï¼‰
- ã‚¯ãƒªãƒƒã‚¯ â†’ åº§å¸­é¸æŠ or ãƒˆãƒ”ãƒƒã‚¯è©³ç´°è¡¨ç¤º
- æ•™å“¡è¦–ç‚¹ vs ç”Ÿå¾’è¦–ç‚¹ã®åˆ‡ã‚Šæ›¿ãˆ

**Props**:
```typescript
{
  seats: SeatWithStudent[];
  currentStudentId: number;
  isTeacher: boolean;
  onSeatClick: (seat: SeatWithStudent) => void;
  viewMode: 'student' | 'teacher';
}
```

#### 2. TopicCard.tsx - ãƒˆãƒ”ãƒƒã‚¯è¡¨ç¤º
**è²¬å‹™**:
- ãƒˆãƒ”ãƒƒã‚¯å†…å®¹ã®è¡¨ç¤º
- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ¼ã®è¡¨ç¤º
- ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ã®è¡¨ç¤º
- æ–°è¦ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ 
- èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆæœªãƒ­ã‚°ã‚¤ãƒ³ã¯æŠ•ç¨¿ä¸å¯ï¼‰

**Props**:
```typescript
{
  post: TopicPost;
  currentStudentId: number | null;
  onReactionChange?: () => void;
}
```

#### 3. NotificationDropdown.tsx - é€šçŸ¥
**è²¬å‹™**:
- æœªèª­é€šçŸ¥ã®è¡¨ç¤º
- ãƒãƒƒã‚¸ã‚«ã‚¦ãƒ³ãƒˆè¡¨ç¤º
- 10ç§’ã”ã¨ã®è‡ªå‹•æ›´æ–°
- æ—¢èª­ç®¡ç†
- ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯ã§å¯¾è±¡ç”»é¢ã¸é·ç§»

**State**:
```typescript
{
  notifications: Notification[];
  unreadCount: number;
  isOpen: boolean;
}
```

### ğŸ¨ çŠ¶æ…‹ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

v4ã§ã¯ä¸»ã« **React Hooks** ã‚’ä½¿ç”¨ï¼š

```typescript
// å…¸å‹çš„ãªçŠ¶æ…‹ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³
const [data, setData] = useState<DataType[]>([]);
const [loading, setLoading] = useState(true);
const [error, setError] = useState<string | null>(null);

useEffect(() => {
  const fetchData = async () => {
    try {
      const response = await fetch('/api/endpoint');
      const json = await response.json();
      if (json.success) {
        setData(json.data);
      } else {
        setError(json.error);
      }
    } catch (e) {
      setError('é€šä¿¡ã‚¨ãƒ©ãƒ¼');
    } finally {
      setLoading(false);
    }
  };
  fetchData();
}, [dependency]);
```

**v5ã¸ã®æ”¹å–„ææ¡ˆ**:
- Zustand / Jotai ãªã©ã®è»½é‡çŠ¶æ…‹ç®¡ç†å°å…¥
- React Query ã§ã®ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®æœ€é©åŒ–

---

## v5ã§æ¤œè¨ã™ã¹ãæ”¹å–„ç‚¹

### ğŸ” v4ã®èª²é¡Œã¨æ”¹å–„æ¡ˆ

#### 1. **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å¼·åŒ–**
**ç¾çŠ¶**:
- localStorage ãƒ™ãƒ¼ã‚¹ã®ç°¡æ˜“èªè¨¼
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒè„†å¼±

**v5ã§ã®æ”¹å–„**:
- âœ… Google OAuth 2.0 ã®å®Ÿè£…
- âœ… JWT ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†
- âœ… Supabase Auth ã®æ´»ç”¨
- âœ… RLS (Row Level Security) ã®æœ‰åŠ¹åŒ–

#### 2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
**ç¾çŠ¶**:
- å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§å–å¾—
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãŒå¤šã™ãã‚‹å ´åˆã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹

**v5ã§ã®æ”¹å–„**:
- âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
- âœ… ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆé•·ã„ãƒªã‚¹ãƒˆï¼‰
- âœ… Debounce / Throttle ã®é©ç”¨
- âœ… React Query ã§ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

#### 3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€**
**ç¾çŠ¶**:
- ã‚¨ãƒ©ãƒ¼å‡¦ç†ãŒå ´æ‰€ã«ã‚ˆã£ã¦ç•°ãªã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒä¸ååˆ†

**v5ã§ã®æ”¹å–„**:
- âœ… çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒª
- âœ… ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (react-hot-toast)
- âœ… ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®åé›† (Sentry ãªã©)

#### 4. **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ**
**ç¾çŠ¶**:
- ARIAå±æ€§ãŒä¸è¶³
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®è€ƒæ…®ä¸è¶³

**v5ã§ã®æ”¹å–„**:
- âœ… ARIAå±æ€§ã®è¿½åŠ 
- âœ… ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã®æ”¹å–„
- âœ… ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

#### 5. **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**
**ç¾çŠ¶**:
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒå­˜åœ¨ã—ãªã„

**v5ã§ã®æ”¹å–„**:
- âœ… Vitest + React Testing Library
- âœ… E2Eãƒ†ã‚¹ãƒˆ (Playwright)
- âœ… APIçµ±åˆãƒ†ã‚¹ãƒˆ

---

## v5æ–°æ©Ÿèƒ½ã®è¦ä»¶

### ğŸŒŸ æœ€é‡è¦æ©Ÿèƒ½: è­°é¡Œåˆ¥ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨è«–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

**ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: Audrey Tangï¼ˆã‚ªãƒ¼ãƒ‰ãƒªãƒ¼ãƒ»ã‚¿ãƒ³ï¼‰æ°ã®ã€ŒPolisã€

#### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
- æˆæ¥­ã‚’è¶…ãˆã¦ã€å­¦æ ¡å…¨ä½“ã§æ°‘ä¸»ä¸»ç¾©ã‚’å­¦ã³å®Ÿè£…ã™ã‚‹å ´
- éå»ã®æˆæ¥­ãƒˆãƒ”ãƒƒã‚¯ã‹ã‚‰è­°é¡Œã‚’é¸ã³ã€æœ‰å¿—ã§å‚åŠ ã™ã‚‹å®Ÿååˆ¶è¨è«–
- æ„è¦‹ã®å¯è¦–åŒ–ï¼ˆ2æ¬¡å…ƒãƒãƒƒãƒ—ï¼‰ã¨ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã®ç™ºè¦‹

#### ä¸»è¦æ©Ÿèƒ½

##### 1. è­°é¡Œã®ç™ºè¦‹ã¨å‹Ÿé›†
```
ãƒ•ãƒ­ãƒ¼:
1. ç”Ÿå¾’ãŒã€Œã¿ã‚“ãªã®è­°è«–ã€ã‹ã‚‰èˆˆå‘³ã‚ã‚‹ãƒˆãƒ”ãƒƒã‚¯ã‚’ç™ºè¦‹
2. ã€Œã“ã®è­°é¡Œã«ã¤ã„ã¦è¨è«–ã—ãŸã„ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. è­°é¡Œã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ã‚’ç·¨é›†ã—ã¦è¨è«–ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ä½œæˆ
4. ä»–ã®ç”Ÿå¾’ã«å‚åŠ ã‚’å‘¼ã³ã‹ã‘ï¼ˆé€šçŸ¥ãƒ»æ²ç¤ºæ¿ï¼‰
```

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæ¡ˆ**:
```sql
CREATE TABLE discussion_threads (
  id BIGSERIAL PRIMARY KEY,
  source_topic_id BIGINT REFERENCES topic_posts(id),
  title VARCHAR(200) NOT NULL,
  description TEXT,
  creator_student_id BIGINT REFERENCES students(id),
  is_active BOOLEAN DEFAULT true,
  participant_limit INTEGER,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE discussion_participants (
  id BIGSERIAL PRIMARY KEY,
  thread_id BIGINT REFERENCES discussion_threads(id),
  student_id BIGINT REFERENCES students(id),
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(thread_id, student_id)
);
```

##### 2. å®Ÿååˆ¶ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨è«–
```
æ©Ÿèƒ½:
- WebSocketãƒ™ãƒ¼ã‚¹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ
- ç™ºè¨€ã®æ§‹é€ åŒ–ï¼ˆè³›æˆãƒ»åå¯¾ãƒ»è³ªå•ãƒ»ææ¡ˆï¼‰
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãç™ºè¨€å±¥æ­´
- ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ï¼ˆæ•™å“¡ã«ã‚ˆã‚‹ç›£è¦–ï¼‰
```

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæ¡ˆ**:
```sql
CREATE TABLE discussion_messages (
  id BIGSERIAL PRIMARY KEY,
  thread_id BIGINT REFERENCES discussion_threads(id),
  student_id BIGINT REFERENCES students(id),
  message_type VARCHAR(20) CHECK (message_type IN ('statement', 'agree', 'disagree', 'question', 'proposal')),
  content TEXT NOT NULL,
  parent_message_id BIGINT REFERENCES discussion_messages(id), -- ã‚¹ãƒ¬ãƒƒãƒ‰å‹
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

##### 3. æ„è¦‹ã®å¯è¦–åŒ–ï¼ˆPolisé¢¨ãƒãƒƒãƒ—ï¼‰
```
æ©Ÿèƒ½:
- å„å‚åŠ è€…ã®æ„è¦‹ã‚’2æ¬¡å…ƒåº§æ¨™ã«ãƒãƒƒãƒ”ãƒ³ã‚°
- ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°: ä¼¼ãŸæ„è¦‹ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’å¯è¦–åŒ–
- å¯¾ç«‹è»¸ã®ç™ºè¦‹: æ„è¦‹ãŒåˆ†ã‹ã‚Œã‚‹ãƒã‚¤ãƒ³ãƒˆã‚’æ˜ç¤º
- ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹é ˜åŸŸ: å…¨å“¡ãŒè³›æˆã™ã‚‹æ„è¦‹ã‚’å¼·èª¿è¡¨ç¤º
```

**å®Ÿè£…æ¡ˆ**:
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: D3.js / Chart.js ã«ã‚ˆã‚‹å¯è¦–åŒ–
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰ã¾ãŸã¯t-SNEã§æ¬¡å…ƒå‰Šæ¸›
- ãƒ‡ãƒ¼ã‚¿: å„ç™ºè¨€ã¸ã®è³›æˆãƒ»åå¯¾æŠ•ç¥¨ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæ¡ˆ**:
```sql
CREATE TABLE discussion_votes (
  id BIGSERIAL PRIMARY KEY,
  thread_id BIGINT REFERENCES discussion_threads(id),
  message_id BIGINT REFERENCES discussion_messages(id),
  voter_student_id BIGINT REFERENCES students(id),
  vote_type VARCHAR(10) CHECK (vote_type IN ('agree', 'disagree', 'neutral')),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(message_id, voter_student_id)
);

CREATE TABLE discussion_map_positions (
  id BIGSERIAL PRIMARY KEY,
  thread_id BIGINT REFERENCES discussion_threads(id),
  student_id BIGINT REFERENCES students(id),
  position_x FLOAT NOT NULL,
  position_y FLOAT NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

##### 4. ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã®ç™ºè¦‹
```
æ©Ÿèƒ½:
- ã€Œå…¨å“¡è³›æˆã€ã®æ„è¦‹ã‚’è‡ªå‹•æ¤œå‡º
- å…±é€šåŸºç›¤ãƒªã‚¹ãƒˆã®ç”Ÿæˆ
- å¯¾ç«‹ã‚’è¶…ãˆãŸã€Œç¬¬ä¸‰ã®é“ã€ã®ææ¡ˆã‚’ä¿ƒã™
```

**å®Ÿè£…æ¡ˆ**:
```typescript
// æ“¬ä¼¼ã‚³ãƒ¼ãƒ‰
function findConsensus(votes: Vote[]): Message[] {
  return messages.filter(msg => {
    const agreeRate = votes.filter(v =>
      v.message_id === msg.id && v.vote_type === 'agree'
    ).length / totalParticipants;

    return agreeRate >= 0.8; // 80%ä»¥ä¸Šã®è³›æˆ
  });
}
```

##### 5. ææ¡ˆã¨æŠ•ç¥¨
```
æ©Ÿèƒ½:
- è§£æ±ºç­–ã®ææ¡ˆãƒ•ã‚©ãƒ¼ãƒ 
- ã€Œæœ€ã‚‚å¤šãã®äººãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹æ¡ˆã€ã‚’é¸ã¶æŠ•ç¥¨
- ãƒ©ãƒ³ã‚¯é¸æŠæŠ•ç¥¨ï¼ˆ1ä½ã€2ä½ã€3ä½ã‚’é¸æŠï¼‰
- çµæœã®å¯è¦–åŒ–ï¼ˆç¥¨ã®åˆ†å¸ƒï¼‰
```

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆæ¡ˆ**:
```sql
CREATE TABLE discussion_proposals (
  id BIGSERIAL PRIMARY KEY,
  thread_id BIGINT REFERENCES discussion_threads(id),
  proposer_student_id BIGINT REFERENCES students(id),
  title VARCHAR(200) NOT NULL,
  description TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE proposal_votes (
  id BIGSERIAL PRIMARY KEY,
  proposal_id BIGINT REFERENCES discussion_proposals(id),
  voter_student_id BIGINT REFERENCES students(id),
  rank INTEGER CHECK (rank >= 1 AND rank <= 3), -- ãƒ©ãƒ³ã‚¯é¸æŠ
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(proposal_id, voter_student_id)
);
```

#### æ•™è‚²çš„æ„ç¾©
- **æ°‘ä¸»ä¸»ç¾©ã®å®Ÿè·µ**: å¤šæ§˜ãªæ„è¦‹ã‚’å°Šé‡ã—ãªãŒã‚‰åˆæ„å½¢æˆ
- **æ‰¹åˆ¤çš„æ€è€ƒ**: è‡ªåˆ†ã®æ„è¦‹ã‚’æ§‹é€ åŒ–ã—ã€ä»–è€…ã®æ„è¦‹ã‚’åˆ†æ
- **Pluralityï¼ˆå¤šå…ƒæ€§ï¼‰**: å¯¾ç«‹ã§ã¯ãªãã€å¤šæ§˜æ€§ã‚’æ´»ã‹ã™æ–¹æ³•ã‚’å­¦ã¶
- **æ¢ç©¶å­¦ç¿’ã®åŸºç›¤**: æ·±ã„å•ã„ã‚’ç«‹ã¦ã€ã‚¯ãƒ©ã‚¹ã‚’è¶…ãˆã¦è­°è«–

---

### ğŸ”§ ãã®ä»–ã®æ–°æ©Ÿèƒ½å€™è£œ

#### 2. åŒ¿åãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®æ‹¡å¼µ
**ç¾çŠ¶**: å®Œå…¨åŒ¿åã®ãƒ•ãƒ©ãƒƒãƒˆãªãƒãƒ£ãƒƒãƒˆ

**v5ã§ã®æ”¹å–„**:
- âœ… ã‚¹ãƒ¬ãƒƒãƒ‰å‹ãƒãƒ£ãƒƒãƒˆï¼ˆLINEé¢¨ãƒªãƒ—ãƒ©ã‚¤æ©Ÿèƒ½ï¼‰
- âœ… æ•™å“¡ç”»é¢ã§ã®ç™ºè¨€è€…è¡¨ç¤ºï¼ˆãƒ›ãƒãƒ¼æ™‚ï¼‰
- âœ… ä¸é©åˆ‡ç™ºè¨€ã®é€šå ±æ©Ÿèƒ½

#### 3. ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®AIåˆ†æ
**æ–°æ©Ÿèƒ½**:
- âœ… å­¦ç¿’å‚¾å‘ã®è‡ªå‹•åˆ†æï¼ˆã‚ˆããƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã™ã‚‹å†…å®¹ï¼‰
- âœ… æˆé•·ã®å¯è¦–åŒ–ï¼ˆæŠ•ç¨¿ã®è³ªã®å¤‰åŒ–ï¼‰
- âœ… ãŠã™ã™ã‚ãƒˆãƒ”ãƒƒã‚¯ã®ææ¡ˆ

#### 4. ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¯ãƒ¼ã‚¯æ©Ÿèƒ½
**æ–°æ©Ÿèƒ½**:
- âœ… æˆæ¥­å†…ã§ã®ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘
- âœ… ã‚°ãƒ«ãƒ¼ãƒ—å°‚ç”¨ãƒãƒ£ãƒƒãƒˆãƒ»åº§å¸­ã‚¨ãƒªã‚¢
- âœ… ã‚°ãƒ«ãƒ¼ãƒ—æˆæœç‰©ã®æå‡º

---

## ğŸš€ v5é–‹ç™ºã®é–‹å§‹æ‰‹é †

### Step 1: v4ã®ç†è§£ï¼ˆã“ã®ã‚¬ã‚¤ãƒ‰ã‚’èª­ã‚€ï¼‰
```bash
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚€
cat V5_DEVELOPMENT_GUIDE.md
```

### Step 2: é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é †ç•ªã«èª­ã‚€
```bash
# Phase 1: å…¨ä½“åƒ
cat README.md
cat V4_COMPLETION_SUMMARY.md

# Phase 2: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
cat src/types/index.ts
cat scripts/database/schema/supabase-schema.sql

# Phase 3: APIè¨­è¨ˆ
ls src/app/api/
cat src/app/api/sessions/route.ts
cat src/app/api/interactions/route.ts

# Phase 4: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
cat src/components/SeatMap.tsx
cat src/components/TopicCard.tsx
```

### Step 3: v5æ–°æ©Ÿèƒ½ã®è¨­è¨ˆ
```bash
# ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚ŒãŸv5è¨ˆç”»æ›¸ã‚’å‚ç…§
cat _archive/v5-planning/V5_BACKLOG.md
cat _archive/v5-planning/V5_DEVELOPMENT_NOTES.md
```

### Step 4: ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã®ä½œæˆ
```bash
# æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout -b feature/v5-discussion-platform

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°
# scripts/database/schema/v5-discussion-schema.sql ã‚’ä½œæˆ

# APIå®Ÿè£…
# src/app/api/discussions/ ã‚’ä½œæˆ

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
# src/app/discussion/[threadId]/page.tsx ã‚’ä½œæˆ
```

---

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### v4ã®ä¸»è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `README.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- `V4_COMPLETION_SUMMARY.md` - å®Ÿè£…æ©Ÿèƒ½ä¸€è¦§
- `DEMO_AND_SETUP_GUIDE.md` - ä½¿ã„æ–¹ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- `STARTUP_PROMPT.md` - AIç”¨èµ·å‹•ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

### ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–è³‡æ–™
- `_archive/v5-planning/V5_BACKLOG.md` - v5æ©Ÿèƒ½ãƒãƒƒã‚¯ãƒ­ã‚°
- `_archive/v5-planning/V5_DEVELOPMENT_NOTES.md` - v5è©³ç´°è¨ˆç”»
- `_archive/development-logs/` - v4é–‹ç™ºã®è¨˜éŒ²

### æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `_docs/V4_DESIGN_DOCUMENT.md` - v4è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `_docs/V4_ADDITIONAL_FEATURES.md` - è¿½åŠ æ©Ÿèƒ½ã®è¨­è¨ˆ
- `_bulletin-board-project/` - æ²ç¤ºæ¿ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆ

---

## ğŸ¯ v5é–‹ç™ºã®æˆåŠŸåŸºæº–

### æ©Ÿèƒ½è¦ä»¶
- âœ… è­°é¡Œåˆ¥è¨è«–ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®å®Ÿè£…
- âœ… Polisé¢¨ã®æ„è¦‹å¯è¦–åŒ–
- âœ… ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã®è‡ªå‹•æ¤œå‡º
- âœ… ææ¡ˆãƒ»æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ 

### éæ©Ÿèƒ½è¦ä»¶
- âœ… èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å¼·åŒ–ï¼ˆGoogle OAuthï¼‰
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆ1000äººè¦æ¨¡å¯¾å¿œï¼‰
- âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 80%ä»¥ä¸Š
- âœ… ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æº–æ‹ ï¼ˆWCAG 2.1 AAï¼‰

### ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£
- âœ… ç›´æ„Ÿçš„ãªUI/UX
- âœ… ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã®ç¢ºä¿ï¼ˆ1ç§’ä»¥å†…ã®æ›´æ–°ï¼‰

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ: v5é–‹ç™ºå‰ã®ç¢ºèªäº‹é …

- [ ] v4ã®å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã 
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’ç†è§£ã—ãŸ
- [ ] APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠŠæ¡ã—ãŸ
- [ ] ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è²¬å‹™ã‚’ç†è§£ã—ãŸ
- [ ] v5æ–°æ©Ÿèƒ½ã®è¦ä»¶ã‚’æ˜ç¢ºåŒ–ã—ãŸ
- [ ] æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã®é¸å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦è¿½åŠ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰
- [ ] é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™

---

**ä½œæˆæ—¥**: 2025å¹´10æœˆ23æ—¥
**ä½œæˆè€…**: Claude Code
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0

ã“ã®ã‚¬ã‚¤ãƒ‰ã‚’ä½¿ã£ã¦ã€åŠ¹ç‡çš„ã«v4ã‚’ç†è§£ã—ã€v5ã®é–‹ç™ºã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚
