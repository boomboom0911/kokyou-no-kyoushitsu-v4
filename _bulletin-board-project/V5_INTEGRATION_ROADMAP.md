# ğŸ—ºï¸ v5çµ±åˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

v4ï¼ˆæ•™å®¤ï¼‰ã¨æ²ç¤ºæ¿ã‚’v5ã§çµ±åˆã™ã‚‹ãŸã‚ã®è©³ç´°ãªæ‰‹é †æ›¸

---

## ğŸ“Š ç¾çŠ¶ã¨ã‚´ãƒ¼ãƒ«

### ç¾çŠ¶ï¼ˆæ²ç¤ºæ¿é–‹ç™ºä¸­ï¼‰

```
ã€v4ã€‘kokyou-no-kyoushitsu-v4
â”œâ”€â”€ GitHub: kokyou-no-kyoushitsu-v4
â”œâ”€â”€ Vercel: kokyou-no-kyoushitsu-v4.vercel.app
â””â”€â”€ Supabase: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
    â”œâ”€â”€ lesson_sessionsï¼ˆæ•™å®¤ç”¨ï¼‰
    â”œâ”€â”€ studentsï¼ˆå…±é€šï¼‰
    â”œâ”€â”€ topic_postsï¼ˆæ•™å®¤ç”¨ï¼‰
    â””â”€â”€ ... ãã®ä»–v4ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«

ã€æ²ç¤ºæ¿ã€‘kokyou-keijiban-v1ï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ GitHub: kokyou-keijiban-v1
â”œâ”€â”€ Vercel: kokyou-keijiban-v1.vercel.app
â””â”€â”€ Supabase: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆv4ã¨å…±æœ‰ï¼‰
    â”œâ”€â”€ bulletin_sessionsï¼ˆæ²ç¤ºæ¿ç”¨ï¼‰
    â”œâ”€â”€ bulletin_postsï¼ˆæ²ç¤ºæ¿ç”¨ï¼‰
    â”œâ”€â”€ bulletin_commentsï¼ˆæ²ç¤ºæ¿ç”¨ï¼‰
    â””â”€â”€ bulletin_reactionsï¼ˆæ²ç¤ºæ¿ç”¨ï¼‰
```

---

### ã‚´ãƒ¼ãƒ«ï¼ˆv5çµ±åˆå¾Œï¼‰

```
ã€v5ã€‘kokyou-no-kyoushitsu-v5
â”œâ”€â”€ GitHub: kokyou-no-kyoushitsu-v5
â”œâ”€â”€ Vercel: kokyou-no-kyoushitsu-v5.vercel.app
â””â”€â”€ Supabase: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ¸ˆã¿ï¼‰
    â”œâ”€â”€ lesson_sessionsï¼ˆæ‹¡å¼µç‰ˆï¼šæ•™å®¤+æ²ç¤ºæ¿ï¼‰
    â”œâ”€â”€ studentsï¼ˆå…±é€šï¼‰
    â”œâ”€â”€ topic_postsï¼ˆæ‹¡å¼µç‰ˆï¼šæ•™å®¤+æ²ç¤ºæ¿ï¼‰
    â”œâ”€â”€ interactionsï¼ˆæ‹¡å¼µç‰ˆï¼šæ•™å®¤+æ²ç¤ºæ¿ï¼‰
    â””â”€â”€ reactionsï¼ˆæ‹¡å¼µç‰ˆï¼šæ•™å®¤+æ²ç¤ºæ¿ï¼‰
```

---

## ğŸš€ çµ±åˆãƒ•ã‚§ãƒ¼ã‚º

### Phase 0: æº–å‚™ï¼ˆv5é–‹ç™ºé–‹å§‹å‰ï¼‰

#### 0-1. v4ã¨æ²ç¤ºæ¿ã®é‹ç”¨å®Ÿç¸¾ã‚’ç¢ºèª
- [ ] v4ã®æˆæ¥­è¨˜éŒ²ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª
- [ ] æ²ç¤ºæ¿ã®æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æ•´ç†
- [ ] v5ã§å¿…è¦ãªæ©Ÿèƒ½ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—

#### 0-2. ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```sql
-- Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
-- ã¾ãŸã¯ pg_dump ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
pg_dump -h xxxxx.supabase.co -U postgres -d postgres > backup_before_v5.sql
```

#### 0-3. v5è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- [ ] çµ±åˆå¾Œã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ
- [ ] UI/UXè¨­è¨ˆï¼ˆãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆï¼‰
- [ ] APIè¨­è¨ˆ
- [ ] èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆ

---

### Phase 1: v5ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ

#### 1-1. æ–°è¦ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
```bash
cd /Users/boomboom0911/Developer/
git clone https://github.com/boomboom0911/kokyou-no-kyoushitsu-v4.git kokyou-no-kyoushitsu-v5

cd kokyou-no-kyoushitsu-v5
git remote remove origin
git remote add origin https://github.com/boomboom0911/kokyou-no-kyoushitsu-v5.git
```

#### 1-2. ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
```bash
# v4ã®é–‹ç™ºè¨˜éŒ²ãªã©ã€v5ã§ã¯ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
rm DEVELOPMENT_LOG_*.md
rm -rf _bulletin-board-project  # çµ±åˆå¾Œã¯ä¸è¦

# v5ç”¨ã®æ–°ã—ã„READMEã‚’ä½œæˆ
```

---

### Phase 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

#### 2-1. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³SQLãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

**`migrations/001_v5_schema.sql`**
```sql
-- ========================================
-- v5çµ±åˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
-- ========================================

BEGIN;

-- ----------------------------------------
-- Step 1: æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚«ãƒ©ãƒ è¿½åŠ 
-- ----------------------------------------

-- lesson_sessions ã‚’æ‹¡å¼µ
ALTER TABLE lesson_sessions
  ADD COLUMN IF NOT EXISTS session_type VARCHAR(20) DEFAULT 'classroom',
  ADD COLUMN IF NOT EXISTS is_permanent BOOLEAN DEFAULT false,
  ADD COLUMN IF NOT EXISTS created_by INTEGER REFERENCES students(id);

-- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
UPDATE lesson_sessions SET session_type = 'classroom' WHERE session_type IS NULL;
UPDATE lesson_sessions SET is_permanent = false WHERE is_permanent IS NULL;

-- topic_posts ã‚’æ‹¡å¼µï¼ˆseat_assignment_id ã‚’ nullable ã«ï¼‰
ALTER TABLE topic_posts ALTER COLUMN seat_assignment_id DROP NOT NULL;

-- ----------------------------------------
-- Step 2: æ²ç¤ºæ¿ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆ
-- ----------------------------------------

-- bulletin_sessions â†’ lesson_sessions
INSERT INTO lesson_sessions (
  code,
  topic_title,
  topic_content,
  session_type,
  is_permanent,
  created_by,
  class_id,
  period,
  created_at
)
SELECT
  code,
  title,
  description,
  'bulletin',
  true,
  created_by,
  NULL,
  NULL,
  created_at
FROM bulletin_sessions;

-- bulletin_posts â†’ topic_posts
INSERT INTO topic_posts (
  session_id,
  seat_assignment_id,
  student_id,
  content,
  created_at
)
SELECT
  ls.id,
  NULL,
  bp.student_id,
  bp.content,
  bp.created_at
FROM bulletin_posts bp
JOIN bulletin_sessions bs ON bp.bulletin_session_id = bs.id
JOIN lesson_sessions ls ON ls.code = bs.code AND ls.session_type = 'bulletin';

-- bulletin_comments â†’ interactions
INSERT INTO interactions (
  target_type,
  target_id,
  student_id,
  content,
  created_at
)
SELECT
  'topic_post',
  tp.id,
  bc.student_id,
  bc.content,
  bc.created_at
FROM bulletin_comments bc
JOIN bulletin_posts bp ON bc.bulletin_post_id = bp.id
JOIN bulletin_sessions bs ON bp.bulletin_session_id = bs.id
JOIN lesson_sessions ls ON ls.code = bs.code AND ls.session_type = 'bulletin'
JOIN topic_posts tp ON tp.session_id = ls.id AND tp.student_id = bp.student_id AND tp.content = bp.content;

-- bulletin_reactions â†’ reactions
INSERT INTO reactions (
  target_type,
  target_id,
  student_id,
  reaction_type,
  created_at
)
SELECT
  'topic_post',
  tp.id,
  br.student_id,
  br.reaction_type,
  br.created_at
FROM bulletin_reactions br
JOIN bulletin_posts bp ON br.bulletin_post_id = bp.id
JOIN bulletin_sessions bs ON bp.bulletin_session_id = bs.id
JOIN lesson_sessions ls ON ls.code = bs.code AND ls.session_type = 'bulletin'
JOIN topic_posts tp ON tp.session_id = ls.id AND tp.student_id = bp.student_id AND tp.content = bp.content;

-- ----------------------------------------
-- Step 3: å¤ã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‰Šé™¤
-- ----------------------------------------

DROP TABLE IF EXISTS bulletin_reactions;
DROP TABLE IF EXISTS bulletin_comments;
DROP TABLE IF EXISTS bulletin_posts;
DROP TABLE IF EXISTS bulletin_sessions;

-- ----------------------------------------
-- Step 4: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®è¿½åŠ 
-- ----------------------------------------

CREATE INDEX IF NOT EXISTS idx_lesson_sessions_type ON lesson_sessions(session_type);
CREATE INDEX IF NOT EXISTS idx_lesson_sessions_permanent ON lesson_sessions(is_permanent);

COMMIT;
```

#### 2-2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œå‰ã®ç¢ºèª
```sql
-- ãƒ‡ãƒ¼ã‚¿ä»¶æ•°ã®ç¢ºèª
SELECT 'v4_sessions', COUNT(*) FROM lesson_sessions;
SELECT 'bulletin_sessions', COUNT(*) FROM bulletin_sessions;
SELECT 'v4_posts', COUNT(*) FROM topic_posts;
SELECT 'bulletin_posts', COUNT(*) FROM bulletin_posts;
```

#### 2-3. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
```bash
# Supabase SQL Editorã§å®Ÿè¡Œ
# ã¾ãŸã¯
psql -h xxxxx.supabase.co -U postgres -d postgres -f migrations/001_v5_schema.sql
```

#### 2-4. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¾Œã®æ¤œè¨¼
```sql
-- çµ±åˆå¾Œã®ãƒ‡ãƒ¼ã‚¿ä»¶æ•°ç¢ºèª
SELECT session_type, COUNT(*) FROM lesson_sessions GROUP BY session_type;
SELECT COUNT(*) FROM topic_posts WHERE seat_assignment_id IS NULL;  -- æ²ç¤ºæ¿æŠ•ç¨¿

-- ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ç¢ºèª
SELECT * FROM lesson_sessions WHERE session_type = 'bulletin' LIMIT 5;
SELECT * FROM topic_posts WHERE seat_assignment_id IS NULL LIMIT 5;
```

---

### Phase 3: v5ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º

#### 3-1. å‹å®šç¾©ã®æ›´æ–°

**`src/types/index.ts`**
```typescript
export type SessionType = 'classroom' | 'bulletin';

export interface LessonSession {
  id: number;
  code: string;
  topic_title: string;
  topic_content: string | null;
  session_type: SessionType;       // æ–°è¦è¿½åŠ 
  is_permanent: boolean;            // æ–°è¦è¿½åŠ 
  created_by: number | null;        // æ–°è¦è¿½åŠ 
  class_id: number | null;
  period: number | null;
  created_at: string;
}

export interface TopicPost {
  id: number;
  session_id: number;
  seat_assignment_id: number | null;  // nullable ã«å¤‰æ›´
  student_id: number | null;
  content: string;
  created_at: string;
}
```

#### 3-2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆç”»é¢ã®æ‹¡å¼µ

**`src/app/teacher/create-session/page.tsx`**
```typescript
const [sessionType, setSessionType] = useState<'classroom' | 'bulletin'>('classroom');

// ãƒ•ã‚©ãƒ¼ãƒ ã«è¿½åŠ 
<div>
  <label>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—</label>
  <select value={sessionType} onChange={(e) => setSessionType(e.target.value)}>
    <option value="classroom">æ•™å®¤ãƒ¢ãƒ¼ãƒ‰ï¼ˆåº§å¸­ãƒ»ã‚¯ãƒ©ã‚¹ãƒ»æ™‚é™ï¼‰</option>
    <option value="bulletin">æ²ç¤ºæ¿ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…¨æ ¡ãƒ»å¸¸è¨­å‹ï¼‰</option>
  </select>
</div>

// æ¡ä»¶ä»˜ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
{sessionType === 'classroom' && (
  <>
    <ClassSelect />
    <PeriodSelect />
  </>
)}
```

#### 3-3. ãƒˆãƒƒãƒ—ç”»é¢ã®æ‹¡å¼µ

**`src/app/page.tsx`**
```typescript
// 2ã¤ã®å…¥å£ã‚’ç”¨æ„
<div className="grid grid-cols-2 gap-4">
  <Link href="/student">
    <div className="card">ğŸ« æ•™å®¤ã«å…¥ã‚‹ï¼ˆ4æ¡ã‚³ãƒ¼ãƒ‰ï¼‰</div>
  </Link>
  <Link href="/bulletin">
    <div className="card">ğŸ“Œ æ²ç¤ºæ¿ã‚’è¦‹ã‚‹</div>
  </Link>
</div>
```

#### 3-4. æ²ç¤ºæ¿ä¸€è¦§ç”»é¢ã®è¿½åŠ 

**`src/app/bulletin/page.tsx`**
```typescript
export default function BulletinListPage() {
  const [bulletins, setBulletins] = useState<LessonSession[]>([]);

  useEffect(() => {
    fetch('/api/sessions?type=bulletin')
      .then(res => res.json())
      .then(data => setBulletins(data.data));
  }, []);

  return (
    <div>
      <h1>å…¬å…±ã®æ²ç¤ºæ¿</h1>
      {bulletins.map(bulletin => (
        <Link key={bulletin.id} href={`/bulletin/${bulletin.code}`}>
          <div>{bulletin.topic_title}</div>
        </Link>
      ))}
    </div>
  );
}
```

#### 3-5. æ²ç¤ºæ¿è©³ç´°ç”»é¢

**`src/app/bulletin/[code]/page.tsx`**
```typescript
// åº§å¸­é¸æŠãªã—ã€ç›´æ¥æŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
export default function BulletinDetailPage() {
  // å®Ÿè£…å†…å®¹ã¯ v4 ã® classroom ãƒšãƒ¼ã‚¸ã‚’ãƒ™ãƒ¼ã‚¹ã«ç°¡ç´ åŒ–
}
```

---

### Phase 4: API ã®æ›´æ–°

#### 4-1. ã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾—API

**`src/app/api/sessions/route.ts`**
```typescript
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const type = searchParams.get('type');  // 'classroom' | 'bulletin'

  let query = supabase.from('lesson_sessions').select('*');

  if (type) {
    query = query.eq('session_type', type);
  }

  const { data, error } = await query;
  // ...
}
```

#### 4-2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆAPI

**`src/app/api/sessions/route.ts` (POST)**
```typescript
export async function POST(request: Request) {
  const { sessionType, topicTitle, classId, period } = await request.json();

  const { data, error } = await supabase
    .from('lesson_sessions')
    .insert({
      code: generateCode(),
      topic_title: topicTitle,
      session_type: sessionType,
      is_permanent: sessionType === 'bulletin',
      class_id: sessionType === 'classroom' ? classId : null,
      period: sessionType === 'classroom' ? period : null,
    });
  // ...
}
```

---

### Phase 5: ãƒ†ã‚¹ãƒˆ

#### 5-1. æ•™å®¤ãƒ¢ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆ
- [ ] v4ã¨åŒã˜å‹•ä½œã‚’ã™ã‚‹ã‹ç¢ºèª
- [ ] åº§å¸­é¸æŠãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] æŠ•ç¨¿ãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆãŒå‹•ä½œ
- [ ] æ¬ å¸­è€…ç®¡ç†ãŒå‹•ä½œ

#### 5-2. æ²ç¤ºæ¿ãƒ¢ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆ
- [ ] æ²ç¤ºæ¿ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] åº§å¸­é¸æŠãªã—ã§æŠ•ç¨¿ã§ãã‚‹
- [ ] å¸¸è¨­å‹ã¨ã—ã¦å‹•ä½œã™ã‚‹

#### 5-3. ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã®æ¤œè¨¼
- [ ] v4ã®éå»ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æ²ç¤ºæ¿ã®éå»ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆãŒæ­£ã—ãç´ä»˜ã„ã¦ã„ã‚‹

---

### Phase 6: ãƒ‡ãƒ—ãƒ­ã‚¤

#### 6-1. Vercelã«æ–°è¦ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# v5ãƒªãƒã‚¸ãƒˆãƒªã‚’Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤
# ç’°å¢ƒå¤‰æ•°ã¯æ—¢å­˜ã®Supabaseã‚’ä½¿ç”¨
NEXT_PUBLIC_TEACHER_PASSWORD=your_password
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

#### 6-2. ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```
v5: kokyou-no-kyoushitsu-v5.vercel.app
ã¾ãŸã¯ myclassroom2025.vercel.app ã‚’ç§»è¡Œ
```

---

### Phase 7: ç§»è¡ŒæœŸé–“

#### 7-1. ä¸¦è¡Œç¨¼åƒæœŸé–“
```
ã€ç§»è¡ŒæœŸé–“ä¸­ã€‘
v4: kokyou-no-kyoushitsu-v4.vercel.appï¼ˆä¿å®ˆãƒ¢ãƒ¼ãƒ‰ï¼‰
æ²ç¤ºæ¿: kokyou-keijiban-v1.vercel.appï¼ˆä¿å®ˆãƒ¢ãƒ¼ãƒ‰ï¼‰
v5: kokyou-no-kyoushitsu-v5.vercel.appï¼ˆæ–°è¦ï¼‰

â†“ 2é€±é–“ã€œ1ãƒ¶æœˆ

ã€ç§»è¡Œå®Œäº†å¾Œã€‘
v4: åœæ­¢
æ²ç¤ºæ¿: åœæ­¢
v5: ãƒ¡ã‚¤ãƒ³ã§é‹ç”¨
```

#### 7-2. ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥
- v4ã¨æ²ç¤ºæ¿ã®ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«ã€Œv5ã«ç§»è¡Œã—ã¾ã—ãŸã€ã®é€šçŸ¥ãƒãƒŠãƒ¼
- æ–°ã—ã„URLã¸ã®ãƒªãƒ³ã‚¯ã‚’è¡¨ç¤º

---

## ğŸ“Š ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

ä¸‡ãŒä¸€v5ã«å•é¡ŒãŒã‚ã£ãŸå ´åˆï¼š

### Step 1: v4/æ²ç¤ºæ¿ã«æˆ»ã™
```bash
# Vercelã§ v4 ã¨ æ²ç¤ºæ¿ ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å†é–‹
```

### Step 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
```sql
-- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
psql -h xxxxx.supabase.co -U postgres -d postgres < backup_before_v5.sql
```

---

## ğŸ“ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### é–‹ç™ºé–‹å§‹å‰
- [ ] v4ã¨æ²ç¤ºæ¿ã®é‹ç”¨å®Ÿç¸¾ã‚’ç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å–å¾—
- [ ] v5è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‰
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³SQLä½œæˆ
- [ ] ãƒ†ã‚¹ãƒˆç’°å¢ƒã§å®Ÿè¡Œãƒ»æ¤œè¨¼
- [ ] ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ã‚’ç¢ºèª

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¾Œ
- [ ] ãƒ‡ãƒ¼ã‚¿ä»¶æ•°ã®ä¸€è‡´ç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ç¢ºèª
- [ ] v5ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å‹•ä½œç¢ºèª

### ãƒ‡ãƒ—ãƒ­ã‚¤å‰
- [ ] æ•™å®¤ãƒ¢ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] æ²ç¤ºæ¿ãƒ¢ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] éå»ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºç¢ºèª

### ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œ
- [ ] v5ã®æœ¬ç•ªå‹•ä½œç¢ºèª
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼é€šçŸ¥å®Œäº†
- [ ] v4/æ²ç¤ºæ¿ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ç›£è¦–

---

## ğŸ¯ æˆåŠŸã®å®šç¾©

- âœ… v4ã®éå»ã®æˆæ¥­è¨˜éŒ²ãŒã™ã¹ã¦è¡¨ç¤ºã•ã‚Œã‚‹
- âœ… æ²ç¤ºæ¿ã®éå»ã®æŠ•ç¨¿ãŒã™ã¹ã¦è¡¨ç¤ºã•ã‚Œã‚‹
- âœ… æ•™å®¤ãƒ¢ãƒ¼ãƒ‰ã¨æ²ç¤ºæ¿ãƒ¢ãƒ¼ãƒ‰ãŒã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹
- âœ… æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
- âœ… ãƒ‡ãƒ¼ã‚¿ã®æå¤±ãŒã‚¼ãƒ­

---

**ä½œæˆæ—¥**: 2025-10-16
**æœ€çµ‚æ›´æ–°**: 2025-10-16
